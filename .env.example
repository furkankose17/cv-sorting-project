# CV Sorting Project - Environment Variables Example
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# Development Authentication (Mocked Mode)
# These are ONLY for local development. Production uses XSUAA.
DEV_ADMIN_PASSWORD=your-secure-password-here
DEV_RECRUITER_PASSWORD=your-secure-password-here
DEV_VIEWER_PASSWORD=your-secure-password-here

# Database Configuration
# Production uses HANA Cloud, development uses SQLite
DB_TYPE=sqlite
DB_CONNECTION_STRING=:memory:

# SAP BTP Services (Production)
# XSUAA_CLIENTID=your-xsuaa-client-id
# XSUAA_CLIENTSECRET=your-xsuaa-client-secret
# XSUAA_URL=https://your-tenant.authentication.eu10.hana.ondemand.com

# ========================================
# Python ML Microservice Configuration
# ========================================

# Embedding Model Configuration
# Using multilingual-e5-small for 100+ language support (EN, DE, TR, FR, ES, etc.)
EMBEDDING_MODEL=intfloat/multilingual-e5-small
EMBEDDING_DIMENSION=384
EMBEDDING_BATCH_SIZE=32
EMBEDDING_CACHE_ENABLED=true
EMBEDDING_MAX_LENGTH=512

# OCR Configuration
# PaddleOCR is primary (faster, better table handling), Tesseract is fallback
OCR_ENGINE=paddleocr
OCR_DEFAULT_LANGUAGE=en
OCR_TABLE_DETECTION=true
OCR_LAYOUT_ANALYSIS=true
OCR_USE_ANGLE_CLS=true

# Tesseract fallback (optional)
# TESSERACT_CMD=/usr/bin/tesseract
# POPPLER_PATH=/usr/bin

# Matching Configuration
SEMANTIC_WEIGHT=0.4
CRITERIA_WEIGHT=0.6

# PostgreSQL + pgvector (for ML service)
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DB=cv_sorting
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=your-password

# ========================================
# SAP Services (Production - Deferred)
# ========================================

# Document AI / OCR Service (not used - using self-hosted PaddleOCR)
# OCR_SERVICE_URL=https://your-document-ai-endpoint
# OCR_SERVICE_KEY=your-api-key

# SAP AI Core (Joule AI) - Deferred for future phase
# AI_CORE_URL=https://api.ai.your-region.aws.ml.hana.ondemand.com
# AI_CORE_CLIENT_ID=your-client-id
# AI_CORE_CLIENT_SECRET=your-client-secret
# AI_CORE_AUTH_URL=https://your-ai-auth-url
# AI_CORE_RESOURCE_GROUP=default

# ========================================
# CAP to Python ML Service Integration
# ========================================

# Python ML Service URL (CAP calls this service for embeddings, OCR, matching)
ML_SERVICE_URL=http://localhost:8000
ML_SERVICE_TIMEOUT=30000

# Application Settings
NODE_ENV=development
PORT=4004
LOG_LEVEL=info

# Security Settings
MAX_FILE_SIZE_MB=50
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
SESSION_SECRET=your-session-secret-here

# CORS Settings (Development)
CORS_ORIGIN=http://localhost:4200

# Feature Flags
ENABLE_OCR=true
ENABLE_AI_FEATURES=true
ENABLE_VIRUS_SCANNING=false

# =============================================================================
# EMAIL AUTOMATION CONFIGURATION
# =============================================================================

# n8n Integration
# -----------------------------------------------------------------------------
# Base URL for n8n webhook endpoints
# This should point to your n8n instance. The webhook paths will be appended.
# Examples:
#   Development: http://localhost:5678/webhook
#   Production:  https://cv-sorting-n8n.cfapps.eu10.hana.ondemand.com/webhook
N8N_WEBHOOK_URL=http://localhost:5678/webhook

# Enable/disable webhook notifications (true/false)
# When disabled, status changes and events are logged but no webhooks are sent.
# Useful for development/testing without n8n running.
ENABLE_WEBHOOKS=false

# Webhook timeout in milliseconds (default: 5000)
# Maximum time to wait for webhook response before timing out.
# Recommended: 5000-10000ms for production
WEBHOOK_TIMEOUT_MS=5000

# Number of retry attempts for failed webhooks (default: 2)
# Total attempts = 1 initial + WEBHOOK_RETRIES
# Retries use exponential backoff (1s, 2s, 4s...)
WEBHOOK_RETRIES=2

# Email Notification Settings
# -----------------------------------------------------------------------------
# Time window for pending notifications in hours (default: 24)
# Controls how far back to look for candidates requiring notifications.
# Used by getPendingNotifications action.
NOTIFICATION_WINDOW_HOURS=24

# Notification cooldown period in hours (default: 24)
# Prevents duplicate notifications for the same candidate-job match
# within this time window.
NOTIFICATION_COOLDOWN_HOURS=24

# Email Notification Feature Flags
# -----------------------------------------------------------------------------
# Enable automatic status change tracking (default: true)
# When enabled, status changes trigger webhook notifications to n8n
ENABLE_STATUS_TRACKING=true

# Enable automatic email notifications (default: true)
# When enabled, high-scoring matches can trigger email notifications
ENABLE_AUTO_NOTIFICATIONS=true

# Rate Limiting for Email Operations
# -----------------------------------------------------------------------------
# Additional rate limit for email-related operations (default: 50)
# Separate from general API rate limits to prevent email spam
RATE_LIMIT_EMAIL_REQUESTS=50

# Rate limit window for email operations in milliseconds (default: 60000 = 1 minute)
RATE_LIMIT_EMAIL_WINDOW_MS=60000
