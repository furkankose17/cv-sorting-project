<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form">
    <Dialog
        id="interviewFeedbackDialog"
        title="{i18n>SubmitFeedback}"
        contentWidth="600px"
        contentHeight="auto"
        busy="{dialog>/isLoading}"
        busyIndicatorDelay="0"
        ariaLabelledBy="feedbackTitle">
        <content>
            <VBox id="feedbackVBox" class="sapUiSmallMargin">
                <MessageStrip
                    id="feedbackInfoStrip"
                    text="{= 'Feedback for: ' + ${dialog>/interviewTitle}}"
                    showIcon="true"
                    class="sapUiSmallMarginBottom"
                    visible="{= !!${dialog>/interviewTitle}}"/>

                <IconTabBar
                    id="feedbackTabBar"
                    selectedKey="ratings"
                    expandable="false"
                    class="sapUiNoContentPadding">
                    <items>
                        <IconTabFilter id="ratingsTab" key="ratings" text="{i18n>Ratings}" icon="sap-icon://favorite">
                            <form:SimpleForm
                                id="ratingsForm"
                                editable="true"
                                layout="ResponsiveGridLayout"
                                labelSpanXL="5"
                                labelSpanL="5"
                                labelSpanM="5"
                                labelSpanS="12">
                                <form:content>
                                    <Label id="overallRatingLabel" text="{i18n>OverallRating}" required="true" labelFor="overallRatingSlider"/>
                                    <Slider
                                        id="overallRatingSlider"
                                        value="{dialog>/overallRating}"
                                        min="1"
                                        max="5"
                                        step="1"
                                        enableTickmarks="true"
                                        showAdvancedTooltip="true"
                                        ariaLabelledBy="overallRatingLabel"/>

                                    <Label id="technicalRatingLabel" text="{i18n>TechnicalRating}" labelFor="technicalRatingSlider"/>
                                    <Slider
                                        id="technicalRatingSlider"
                                        value="{dialog>/technicalRating}"
                                        min="1"
                                        max="5"
                                        step="1"
                                        enableTickmarks="true"
                                        showAdvancedTooltip="true"
                                        ariaLabelledBy="technicalRatingLabel"/>

                                    <Label id="communicationRatingLabel" text="{i18n>CommunicationRating}" labelFor="communicationRatingSlider"/>
                                    <Slider
                                        id="communicationRatingSlider"
                                        value="{dialog>/communicationRating}"
                                        min="1"
                                        max="5"
                                        step="1"
                                        enableTickmarks="true"
                                        showAdvancedTooltip="true"
                                        ariaLabelledBy="communicationRatingLabel"/>

                                    <Label id="cultureFitRatingLabel" text="{i18n>CultureFitRating}" labelFor="cultureFitRatingSlider"/>
                                    <Slider
                                        id="cultureFitRatingSlider"
                                        value="{dialog>/cultureFitRating}"
                                        min="1"
                                        max="5"
                                        step="1"
                                        enableTickmarks="true"
                                        showAdvancedTooltip="true"
                                        ariaLabelledBy="cultureFitRatingLabel"/>
                                </form:content>
                            </form:SimpleForm>
                        </IconTabFilter>

                        <IconTabFilter id="feedbackTab" key="feedback" text="{i18n>Feedback}" icon="sap-icon://notes">
                            <form:SimpleForm
                                id="feedbackForm"
                                editable="true"
                                layout="ResponsiveGridLayout"
                                labelSpanXL="3"
                                labelSpanL="3"
                                labelSpanM="3"
                                labelSpanS="12">
                                <form:content>
                                    <Label id="feedbackLabel" text="{i18n>Feedback}" labelFor="feedbackTextArea"/>
                                    <TextArea
                                        id="feedbackTextArea"
                                        value="{dialog>/feedback}"
                                        rows="4"
                                        width="100%"
                                        placeholder="Overall feedback about the candidate..."
                                        ariaLabelledBy="feedbackLabel"/>

                                    <Label id="strengthsLabel" text="{i18n>Strengths}" labelFor="strengthsTextArea"/>
                                    <TextArea
                                        id="strengthsTextArea"
                                        value="{dialog>/strengths}"
                                        rows="3"
                                        width="100%"
                                        placeholder="Key strengths observed..."
                                        ariaLabelledBy="strengthsLabel"/>

                                    <Label id="improvementsLabel" text="{i18n>AreasOfImprovement}" labelFor="improvementsTextArea"/>
                                    <TextArea
                                        id="improvementsTextArea"
                                        value="{dialog>/areasOfImprovement}"
                                        rows="3"
                                        width="100%"
                                        placeholder="Areas that need improvement..."
                                        ariaLabelledBy="improvementsLabel"/>
                                </form:content>
                            </form:SimpleForm>
                        </IconTabFilter>

                        <IconTabFilter id="recommendationTab" key="recommendation" text="{i18n>Recommendation}" icon="sap-icon://decision">
                            <form:SimpleForm
                                id="recommendationForm"
                                editable="true"
                                layout="ResponsiveGridLayout"
                                labelSpanXL="3"
                                labelSpanL="3"
                                labelSpanM="3"
                                labelSpanS="12">
                                <form:content>
                                    <Label id="recommendationLabel" text="{i18n>Recommendation}" required="true" labelFor="recommendationSelect"/>
                                    <Select
                                        id="recommendationSelect"
                                        selectedKey="{dialog>/recommendation}"
                                        ariaLabelledBy="recommendationLabel">
                                        <core:Item id="strongHireItem" key="STRONG_HIRE" text="Strong Hire"/>
                                        <core:Item id="hireItem" key="HIRE" text="Hire"/>
                                        <core:Item id="maybeItem" key="MAYBE" text="Maybe / Needs More Evaluation"/>
                                        <core:Item id="noHireItem" key="NO_HIRE" text="No Hire"/>
                                        <core:Item id="strongNoItem" key="STRONG_NO" text="Strong No"/>
                                    </Select>

                                    <Label id="nextStepsLabel" text="{i18n>NextSteps}" labelFor="nextStepsTextArea"/>
                                    <TextArea
                                        id="nextStepsTextArea"
                                        value="{dialog>/nextSteps}"
                                        rows="3"
                                        width="100%"
                                        placeholder="Recommended next steps..."
                                        ariaLabelledBy="nextStepsLabel"/>
                                </form:content>
                            </form:SimpleForm>
                        </IconTabFilter>
                    </items>
                </IconTabBar>
            </VBox>
        </content>
        <beginButton>
            <Button
                id="submitFeedbackBtn"
                text="{i18n>SubmitFeedback}"
                type="Emphasized"
                press=".onConfirmSubmitFeedback"
                enabled="{= !${dialog>/isLoading} }"/>
        </beginButton>
        <endButton>
            <Button
                id="cancelFeedbackBtn"
                text="{i18n>dialogCancel}"
                press=".onCancelSubmitFeedback"/>
        </endButton>
    </Dialog>
</core:FragmentDefinition>
